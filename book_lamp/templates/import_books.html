{% extends "base.html" %}

{% block title %}Import from Libib - Book Lamp{% endblock %}

{% block content %}
<div style="max-width: 600px; margin: 0 auto;">
    <div style="margin-bottom: 2rem;">
        <a href="{{ url_for('list_books') }}"
            style="color: var(--primary-light); text-decoration: none; display: flex; align-items: center; gap: 0.5rem; font-size: 0.9rem;">
            ‚Üê Back to Library
        </a>
    </div>

    <div class="card p-4">
        <h1 style="margin-top: 0;">Import from Libib</h1>
        <p style="color: var(--text-muted); margin-bottom: 1.5rem;">
            Upload your Libib library export (CSV) to bulk-add books and their reading history.
        </p>

        <form method="post" enctype="multipart/form-data">
            <div class="form-group mb-4">
                <label for="csv_file" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Choose CSV
                    File</label>
                <input type="file" id="csv_file" name="file" accept=".csv" required
                    style="width: 100%; padding: 1rem; background: rgba(255, 255, 255, 0.05); border: 1px dashed var(--glass-border); border-radius: 12px; color: white; cursor: pointer;">
            </div>

            <div
                style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2); border-radius: 12px; padding: 1rem; margin-bottom: 1.5rem;">
                <h3 style="margin-top: 0; font-size: 1rem; color: #60a5fa;">üí° How to export from Libib:</h3>
                <ol style="margin-bottom: 0; padding-left: 1.25rem; font-size: 0.9rem; color: var(--text-muted);">
                    <li>Log in to your Libib account.</li>
                    <li>Go to <strong>Settings</strong> ‚Üí <strong>Export</strong>.</li>
                    <li>Select the library you want to export.</li>
                    <li>Download the CSV file and upload it here.</li>
                </ol>
            </div>

            <div class="form-group mb-4"
                style="background: rgba(255, 255, 255, 0.05); border: 1px solid var(--glass-border); border-radius: 12px; padding: 1rem;">
                <label style="display: flex; align-items: center; gap: 0.75rem; cursor: pointer; margin: 0;">
                    <input type="checkbox" name="fetch_metadata" checked
                        style="width: 1.25rem; height: 1.25rem; accent-color: var(--primary);">
                    <div style="flex: 1;">
                        <span style="display: block; font-weight: 600; margin-bottom: 0.25rem;">Automatically fetch
                            missing covers & metadata</span>
                        <span style="display: block; font-size: 0.85rem; color: var(--text-muted);">
                            This will search external databases for covers, page counts, and more.
                            The process runs in the background, so you can continue using the app.
                        </span>
                    </div>
                </label>
            </div>

            <div
                style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.2); border-radius: 12px; padding: 1rem; margin-bottom: 1.5rem; font-size: 0.85rem;">
                <strong style="color: #c084fc;">‚ö° Fast Import:</strong>
                <p style="margin: 0.5rem 0 0 0; color: var(--text-muted);">
                    Your import will start immediately and run in the background. You'll see a message confirming the process has begun, and books will appear as they're processed.
                </p>
            </div>

            <button type="submit" class="btn w-100">Start Import</button>
        </form>
    </div>
</div>
{% endblock %}