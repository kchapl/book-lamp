{% extends "base.html" %}

{% block title %}Import from Libib - Book Lamp{% endblock %}

{% block content %}
<div class="form-container-narrow">
    <div class="mb-2">
        <a href="{{ url_for('list_books') }}" class="publisher-link flex-center gap-05 text-small">
            ‚Üê Back to Library
        </a>
    </div>

    <div class="card p-4">
        <h1 class="mt-0">Import from Libib</h1>
        <p class="text-muted mb-15">
            Upload your Libib library export (CSV) to bulk-add books and their reading history.
        </p>

        <form method="post" enctype="multipart/form-data">
            <div class="form-group mb-1">
                <label for="csv_file" class="form-label">Choose CSV
                    File</label>
                <input type="file" id="csv_file" name="file" accept=".csv" required class="file-input-wrapper">
            </div>

            <div class="info-box info-box-blue">
                <h3 class="info-box-title info-box-title-blue">üí° How to export from Libib:</h3>
                <ol class="info-list">
                    <li>Log in to your Libib account.</li>
                    <li>Go to <strong>Settings</strong> ‚Üí <strong>Export</strong>.</li>
                    <li>Select the library you want to export.</li>
                    <li>Download the CSV file and upload it here.</li>
                </ol>
            </div>

            <div class="checkbox-card mb-1">
                <label class="checkbox-label">
                    <input type="checkbox" name="fetch_metadata" checked class="checkbox-input">
                    <div class="checkbox-text-wrapper">
                        <span class="checkbox-title">Automatically fetch
                            missing covers & metadata</span>
                        <span class="checkbox-desc">
                            This will search external databases for covers, page counts, and more.
                            The process runs in the background, so you can continue using the app.
                        </span>
                    </div>
                </label>
            </div>

            <div class="info-box info-box-purple text-xs">
                <strong class="info-box-title-purple">‚ö° Fast Import:</strong>
                <p class="text-muted mt-05">
                    Your import will start immediately and run in the background. You'll see a message confirming the
                    process has begun, and books will appear as they're processed.
                </p>
            </div>

            <button type="submit" class="btn w-full">Start Import</button>
        </form>
    </div>
</div>
{% endblock %}